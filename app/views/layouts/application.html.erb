<!DOCTYPE html>
<html>
  <head>
    <title>Medication Manager</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %> <!-- Turbo + Stimulus を正しく読み込む -->
  </head>

  <body>
    <header class="navbar">
      <div class="container">
        <h1 class="logo">💊 Medication Manager</h1>
        <ul class="nav-links">
          <% if user_signed_in? %>
            <li>
              <% if current_user.patient? %>
                <span class="user-name">患者: <%= current_user.name %> さん</span> |
                <%= link_to "ログアウト", destroy_patient_session_path,
                            data: { turbo_method: :delete, turbo_confirm: "ログアウトしますか？" } %>
              <% elsif current_user.doctor? %>
                <span class="user-name">医師: <%= current_user.name %> 先生</span> |
                <%= link_to "ログアウト", destroy_doctor_session_path,
                            data: { turbo_method: :delete, turbo_confirm: "ログアウトしますか？" } %>
              <% elsif current_user.pharmacy? %>
                <span class="user-name"><%= current_user.name %></span> |
                <%= link_to "ログアウト", destroy_pharmacy_session_path,
                            data: { turbo_method: :delete, turbo_confirm: "ログアウトしますか？" } %>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    </header>

    <div class="container">
      <% if notice %>
        <p class="alert notice"><%= notice %></p>
      <% end %>
      <% if alert %>
        <p class="alert alert-danger"><%= alert %></p>
      <% end %>

      <%= yield %>
    </div>
  </body>
</html>










